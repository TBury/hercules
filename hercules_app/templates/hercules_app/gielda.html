
{% load static %}
<!DOCTYPE html>
<html lang="pl-pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Hercules to najlepszy polski system rozliczeń dla wirtualnych spedycji w ETS2. Dołącz do nas już teraz i zostań herosem transportu!">

    <link rel="apple-touch-icon" sizes="57x57" href="{% static 'assets/icons/apple-icon-57x57.png' %}">
    <link rel="apple-touch-icon" sizes="60x60" href="{% static 'assets/icons/apple-icon-60x60.png' %}">
    <link rel="apple-touch-icon" sizes="72x72" href="{% static 'assets/icons/apple-icon-72x72.png' %}">
    <link rel="apple-touch-icon" sizes="76x76" href="{% static 'assets/icons/apple-icon-76x76.png' %}">
    <link rel="apple-touch-icon" sizes="114x114" href="{% static 'assets/icons/apple-icon-114x114.png' %}">
    <link rel="apple-touch-icon" sizes="120x120" href="{% static 'assets/icons/apple-icon-120x120.png' %}">
    <link rel="apple-touch-icon" sizes="144x144" href="{% static 'assets/icons/apple-icon-144x144.png' %}">
    <link rel="apple-touch-icon" sizes="152x152" href="{% static 'assets/icons/apple-icon-152x152.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'assets/icons/apple-icon-180x180.png' %}">
    <link rel="icon" type="image/png" sizes="192x192"
        href="{% static 'assets/icons/android-icon-192x192.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'assets/icons/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'assets/icons/favicon-96x96.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'assets/icons/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'assets/manifest.json' %} ">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="{% static 'assets/icons/ms-icon-144x144.png' %}">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.2/css/bulma.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/panel.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/gielda.css' %}">
    <script defer src="{% static 'js/gielda.js' %}"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js"></script>
    <script src="{% static 'js/toast.js' %}"></script>
    <title>Giełda zleceń | Hercules</title>
</head>

<body>
{% include "hercules_app/main_panel.html" %}
    <div class="wrapper">
        <div class="columns">
            <aside class="column is-2 aside is-hidden-mobile is-placed-left">
                <nav class="menu">
                    <p class="menu-label">
                        Menu główne
                    </p>
                    <ul class="menu-list">
                        <li>
                            <a class="panel-option" href="/panel">
                                <p class="option main-site">Panel systemu</p>
                            </a>
                        </li>
                        <li>
                            <a href="/download">
                                <p class="option download">Pobierz aplikację</p>
                            </a>
                        </li>
                    </ul>
                    <p class="menu-label">
                        Kierowca
                    </p>
                    <ul class="menu-list">
                        <li>
                            <a href="/drivers-card">
                                <p class="option driver-card">Karta kierowcy</p>
                            </a>
                        </li>
                        <li>
                            <a href="/add-delivery">
                                <p class="option add-delivery">Dodaj dostawę</p>
                            </a>
                        </li>
                        <li>
                            <a class="is-active" href="/Gielda/Offers/">
                                <p class="option gielda">Giełda zleceń</p>
                            </a>
                        </li>
                        <li>
                            <a href="/Dispositions">
                                <p class="option dispositions">Dyspozycje</p>
                            </a>
                        </li>
                        <li>
                            <a href="/Deliveries">
                                <p class="option deliveries">Twoje dostawy</p>
                            </a>
                        </li>
                    </ul>
                    <p class="menu-label">
                        Spedycja
                    </p>
<ul class="menu-list">
                        {% if position is None %}
                        <li>
                            <a href="/Companies">
                                <p class="option search-company">
                                    Znajdź firmę
                                </p>
                            </a>
                        </li>
                        {% elif position is not None %}
                        <li>
                            <a href="/Company/CompanyProfile">
                                <p class="option company-profile">
                                    Profil firmy
                                </p>
                            </a>
                        </li>
                        <li>
                            <a href="/Company/Drivers">
                                <p class="option drivers">
                                    Kierowcy
                                </p>
                            </a>
                        </li>
                        {% endif %}
                        <li>
                            <a href="/Vehicles">
                                <p class="option vehicles">{% if position is None %} Twoje pojazdy {% else %}
                                    Pojazdy
                                    firmowe {% endif %}</p>
                            </a>
                        </li>
                        {% if position == "Szef" or position == "Spedytor" %}
                        <li>
                            <a href="/Company/Waybills">
                                <p class="option waybills">Listy przewozowe</p>
                            </a>
                        </li>
                        <li>
                            <a href="/Company/Dispositions">
                                <p class="option dispositions">Dyspozycje firmowe</p>
                            </a>
                        </li>
                        {% endif %}
                    {% if position == "Szef" %}
                        <li>
                            <a href="/Company/Settings">
                                <p class="option settings">Ustawienia firmy</p>
                            </a>
                        </li>
                        <li>
                            <a href="/Company/JobApplications">
                                <p class="option settings">Podania o pracę</p>
                            </a>
                        </li>
                    {% endif %}
                    {% if position is None %}
                    <li>
                        <a href="/JobApplications">
                            <p class="option settings">Podania o pracę</p>
                        </a>
                    </li>
                    {% endif %}
                    </ul>
                </nav>
            </aside>
            <main class="column main">
                <header>
                    <h1 class="title">Giełda zleceń</h1>
                    <a href="/Gielda/Offers/NewOffer" class="button add-new-offer">+ Dodaj ofertę</a>
                    <div class="box card filters">
                        <form action="/Gielda/Offers/" method="GET">
                            <div class="columns">
                                <div class="column is-3">
                                    <div class="field">
                                        <p class="control">
                                            <input class="input" type="text" name="loading_city" id="autoCompleteCities"
                                                placeholder="Miasto załadunku">
                                        </p>
                                    </div>
                                </div>
                                <div class="column is-3">
                                    <div class="field">
                                        <p class="control">
                                            <input class="input" type="text" name="unloading_city"
                                                id="autoCompleteUnloadingCities"
                                                placeholder="Miasto rozładunku">
                                        </p>
                                    </div>
                                </div>
                                <div class="column">
                                    <div class="dropdown">
                                        <div class="select">
                                            <select name="income_min" class="dropdown-content">
                                                <option value="" selected class="option-placeholder">Cena od</option>
                                                <option value="1000">
                                                    1 000 PLN
                                                    </a>
                                                <option value="5000">
                                                    5 000 PLN
                                                    </a>
                                                <option value="10000">
                                                    10 000 PLN
                                                    </a>
                                                <option value="15000">
                                                    15 000 PLN
                                                    </a>
                                                <option value="20000">
                                                    20 000 PLN
                                                    </a>
                                                <option value="30000">
                                                    30 000 PLN
                                                    </a>
                                                <option value="35000">
                                                    35 000 PLN
                                                    </a>
                                                <option value="40000">
                                                    40 000 PLN
                                                    </a>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="dropdown">
                                        <div class="select">
                                            <select name="income_max" class="dropdown-content">
                                                <option value="" selected class="option-placeholder">Cena do</option>
                                                <option value="1000">
                                                    1 000 PLN
                                                    </a>
                                                <option value="5000">
                                                    5 000 PLN
                                                    </a>
                                                <option value="10000">
                                                    10 000 PLN
                                                    </a>
                                                <option value="15000">
                                                    15 000 PLN
                                                    </a>
                                                <option value="20000">
                                                    20 000 PLN
                                                    </a>
                                                <option value="30000">
                                                    30 000 PLN
                                                    </a>
                                                <option value="35000">
                                                    35 000 PLN
                                                    </a>
                                                <option value="40000">
                                                    40 000 PLN
                                                    </a>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="columns">
                                <div class="column is-3">
                                    <div class="field">
                                        <p class="control">
                                            <input class="input" type="text" name="loading_country"
                                                placeholder="Kraj załadunku">
                                        </p>
                                    </div>
                                </div>
                                <div class="column is-3">
                                    <div class="field">
                                        <p class="control">
                                            <input class="input" type="text" name="unloading_country"
                                                placeholder="Kraj rozładunku">
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <a type="submit" class="button search-offers">Szukaj zleceń</a>
                        </form>
                    </div>
                    <form class="sort-form" action="/Gielda/Offers/" method="GET">
                        <div class="sort">
                            <div class="select sort-select">
                                <select class="sort_by" name="sort_by">
                                    <option value="">Wyróżnione zlecenia</option>
                                    <option value="-price" {% if sort_by == '-price' %} selected {% endif %}>Najdroższe
                                    </option>
                                    <option value="price" {% if sort_by == 'price' %} selected {% endif %}>Najtańsze
                                    </option>
                                    <option value="-tonnage" {% if sort_by == '-tonnage' %} selected {% endif %}>
                                        Najcięższe</option>
                                    <option value="tonnage" {% if sort_by == 'tonnage' %} selected {% endif %}>
                                        Najlżejsze</option>
                                    <option value="-created_at" {% if sort_by == '-created_at' %} selected {% endif %}>
                                        Najnowsze</option>
                                </select>
                            </div>
                        </div>
                    </form>
                    
                    {% if offers %}
                    {% for offer in offers %}
                    <div class="box card offer-container">
                        <div class="columns offer">
                            <div class="column place">
                                {% with 'assets/countries/'|add:offer.loading_country|add:'.png' as image_static %}
                                <img src="{% static image_static %}" class="country-icon">
                                {% endwith %}
                                <span class="city-and-company">
                                    <p class="city">{{ offer.loading_city }}</p>
                                    {% with 'assets/companies/'|add:offer.loading_spedition|add:'.png' as image_static %}
                                    <img src="{% static image_static %}" class="company">
                                    {% endwith %}
                                </span>
                            </div>
                            <div class="column place">
                                {% with 'assets/countries/'|add:offer.unloading_country|add:'.png' as image_static %}
                                <img src="{% static image_static %}" class="country-icon">
                                {% endwith %}
                                <span class="city-and-company">
                                    <p class="city">{{ offer.unloading_city }}</p>
                                    {% with 'assets/companies/'|add:offer.unloading_spedition|add:'.png' as image_static %}
                                    <img src="{% static image_static %}" class="company">
                                    {% endwith %}
                                </span>
                            </div>
                            <div class="column">
                                <span class="cargo">
                                    <b>{{ offer.cargo }}</b>
                                    <br>
                                    {{ offer.tonnage }} kg
                                </span>
                            </div>
                            <div class="column">
                                <span class="trailer">
                                    {{ offer.trailer }}
                                </span>
                            </div>
                            <div class="column">
                                <span class="income">
                                    <b>{{ offer.price }} zł</b>
                                </span>

                            </div>
                            <div class="column">
                                <a href="{{ offer.id }}" class="button check-details is-rounded">Sprawdź szczegóły</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="box card no-offers-container">
                        <div class="no-offers">
                            <img src="{% static 'assets/icons/no_offers.png' %}" class="no-offers-icon">
                            <span class="no-offers-text">
                                <h1 class="no-offers-title">Nic nie znaleźliśmy.</h1>
                                <p class="sub-text">
                                    Spróbuj zmienić filtry wyszukiwania. Możesz też dodać własne zlecenie.
                                </p>
                            </span>
                        </div>
                    </div>
                    {% endif %}
                </header>
            </main>
        </div>
    </div>
</body>
<script defer src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js">
</script>
<script defer src="{% static 'js/autocomplete_gielda.js' %}"></script>
</html>